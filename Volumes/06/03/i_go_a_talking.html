<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.45">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="W.E.B. Du&nbsp;Bois">
<meta name="dcterms.date" content="1913-01-01">

<title>I Go A-Talking – Dare You Fight</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../../styles.css">
<meta name="citation_title" content="I Go A-Talking">
<meta name="citation_author" content="W.E.B. Du&nbsp;Bois">
<meta name="citation_publication_date" content="1913-01-01">
<meta name="citation_cover_date" content="1913-01-01">
<meta name="citation_year" content="1913">
<meta name="citation_online_date" content="1913-01-01">
<meta name="citation_fulltext_html_url" content="https://www.dareyoufight.org/Volumes/06/03/i_go_a_talking.html">
<meta name="citation_issue" content="3">
<meta name="citation_volume" content="6">
<meta name="citation_language" content="en">
<meta name="citation_firstpage" content="130">
<meta name="citation_journal_title" content="The&nbsp;Crisis">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../../Images/logo.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../../../index.html">
    <span class="navbar-title">Dare You Fight</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../about.html"> 
<span class="menu-text">Introduction</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../listing.html"> 
<span class="menu-text">Articles</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../covers.html"> 
<span class="menu-text">Covers</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">I Go A-Talking</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>W.E.B. Du&nbsp;Bois </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">January 1, 1913</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p>I have made a great journey to three of the four corners of this Western world, over a distance of 7,000 miles, and through thirty States; and I am overwhelmed almost to silence over the things I have seen, the persons I have known and the forces I have felt.</p>
<p>First, of course, and foremost, comes a sense of the vastness of this land. The sheer brute bigness of its distances is appalling. I think of the endless ride of three days and four nights from the silver beauty of Seattle to the sombre whirl of Kansas City. I think of the thousand miles of California and the empire of Texas, the grim vastness of the desert, the wideness of the blue Pacific at San Diego—but all, is it not all typified at the Grand Canyon?</p>
<section id="the-grand-canyon" class="level2">
<h2 class="anchored" data-anchor-id="the-grand-canyon">The Grand Canyon</h2>
<p>It is a cruel gash in the bosom of the earth down to its very entrails — a wound where the dull titanic knife has turned and twisted in the hole, leaving its edges livid scarred, jagged and pulsing over the white and red and purple of its mighty flesh, while down below, down, down below, in black and severed vein, boils the dull and sullen flood of the Colorado.</p>
<p>It is awful. There can be nothing like it. It is the earth and skies gone stark and raving mad. The mountains up-twirled, disbodied and inverted stand on their peaks and throw their bowels to the skies. Their earth is air — their ether blood-red rock engreened. You stand upon their roots and fall into their pinnacles a mighty mile.</p>
<p>Behold this mauve and purple mocking of time and space. See yonder peak! No human foot has trod it. Into that blue shadow only the eye of God has looked. Listen to the accents of that gorge which mutters: “Before Abraham was, I am.” Is yonder wall a hedge of black, or is it the rampart between Heaven and hell? I see greens — is it grass or giant pines? I see specks that may be boulders. Ever the winds sigh and drop into those sun-swept silences. Ever the gorge lies motionless, unmoved, until I fear. It is an awful thing, unholy, terrible. It is human — some mighty drama unseen, unheard, is playing there its tragedies or mocking comedy and the laugh of endless years is shrieking onward from peak to peak, unheard, unechoed and unknown.</p>
</section>
<section id="the-talks" class="level2">
<h2 class="anchored" data-anchor-id="the-talks">The Talks</h2>
<p>Through such a gateway I came out to the cities of men and in these I made twenty-eight talks to audiences aggregating 18,000 human souls.</p>
<p>What wonderful and varied audiences they were: there was the vast theatre in Los Angeles where I strained to reach the last dim gallery rows; there was the little group of a hundred or so in Stockton, and the thoughtful half thousand down in San Diego and over in Indianapolis. Most of all, perhaps, I felt the throb of personal appreciation and understanding in St.&nbsp;Louis and Oakland, while the stillness of a deep earnestness, almost tragedy, lay on the audiences in Fort Worth and Atlanta.</p>
<p>At Los Angeles I spoke again and again to audiences that did not seem to tire, while in the wonderful Northwest I met the little group at Portland, the people of Tacoma—so tireless in their thoughtful care — and crowned it all at Seattle, the wonder city that sits gleaming amid its waters with its face to the great North.</p>
<p>In the eighteen cities where I spoke live 500,000 Americans of Negro descent, and I cannot cease marveling at their grit and energy and alertness. They complain at themselves and criticise, but they are pulsing and alive with a new ambition and determinedness which were to me astounding.</p>
</section>
<section id="the-mid-west" class="level2">
<h2 class="anchored" data-anchor-id="the-mid-west">The Mid West</h2>
<p>In Indianapolis, St.&nbsp;Louis and Kansas City strong groups of Negroes are uniting to fight segregation, to improve and defend the schools and to open the gate of opportunity for their children. They are not yet united or agreed, but their steps toward union and agreement in the last ten years have been most encouraging. They welcomed a gospel of fight and self-assertion.</p>
</section>
<section id="southern-california" class="level2">
<h2 class="anchored" data-anchor-id="southern-california">Southern California</h2>
<p>Los Angeles was wonderful. The air was scented with orange blossoms and the beautiful homes lay low crouching on the earth as though they loved its scents and flowers. Nowhere in the United States is the Negro so well and beautifully housed, nor the average of efficiency and intelligence in the colored population so high. Here is an aggressive, hopeful group — with some wealth, large industrial opportunity and a buoyant spirit.</p>
<p>Down at San Diego, with its bold and beautiful coast on the great Pacific, is a smaller group, but kindly and thrifty, with pushing leaders.</p>
</section>
<section id="the-golden-gate" class="level2">
<h2 class="anchored" data-anchor-id="the-golden-gate">The Golden Gate</h2>
<p>The shadow of a great fear broods over San Francisco. They have not forgotten the earthquake, and the stranger realizes what it was by the awe in their tones., One misses here the buoyancy and aggressiveness of Southern California and yet the fifty-eight leaders who met me at dinner were a fine group of men, and they expect the colored world to greet them in 1915 at the exposition.</p>
<p>This group stands closer to the progressive whites than many others and has a chance to share in the great movements of uplift.</p>
<p>At Sacramento I did not speak, but a little group made my hours of waiting-pleasant — an unassuming group with, pleasant manners and warm hearts. I shall not forget them.</p>
</section>
<section id="the-northwest" class="level2">
<h2 class="anchored" data-anchor-id="the-northwest">The Northwest</h2>
<p>Up then I rushed through a rich, green valley and then through high, full-bosomed hills — through that contrast and astonishment which is California.</p>
<p>Portland is the older Northwest — staid and quiet, with a certain strength and bigness. The audience was small and the people were not sure of my message and purpose; but they themselves were awakening and they showed new homes and enterprises with pardonable pride.</p>
<p>Tacoma will always seem to me like a place of home coming. I have seldom come to a strange city with so intimate an understanding and sense of fellowship. The audience was white and black and sympathetically blended. The mayor came and spoke and ate and an old Harvard schoolmate introduced me. They gave me a loving cup and it did not seem inappropriate, so that I went away thinking not so much of a separate striving group as of a body of good friends with scant color line.</p>
<p>Then, as I have said, the wonderful Western pilgrimage was crowned at Seattle. The magic city of 300,000 lies on its hills above silvery waters, dream-beautiful and all but uncanny in its unexpectedness. The group of men who welcomed me were unusual in vigor and individuality. There was the lawyer who thoughtfully engineered it all; the young doctor with his cheery face; the droll politician with his reminiscences and strong opinions; the merchant from up country and his little daughter whose beautiful face of the long years ago I remembered suddenly amid the cheer of her perfect little home. There was the caterer, and the minister — it was a fine group. I have seldom seen its equal.</p>
<p>For one day I turned my back on the perfect memory of this golden journey and sailed out across the seas and thanked God for this the kindliest race on His green earth, for whom I had the privilege of working and to whom I had the pride of belonging.</p>
</section>
<section id="texas" class="level2">
<h2 class="anchored" data-anchor-id="texas">Texas</h2>
<p>Then I plunged into Texas. One day the white, drifted snows of Montana and then, in less than a week, the sound of the reaper in the golden grain of the Red River valley!</p>
<p>One shivers at the “Jim Crow” cars of Texas. After the luxury of the West and the public courtesy and hospitality, the dirt and impudence of a land where to travel at all meant twelve to twenty-four hours in the most primitive accommodations, was an awful change. For twenty-four hours on one journey I was able to purchase only two musty ham sandwiches to eat, and I sat up three nights in succession to keep engagements.</p>
<p>But what was lacking in public and white courtesy was more than compensated in private and Negro hospitality and appreciation.</p>
<p>At Dallas was one of the strongest, truest religious leaders I have met. At Austin were growing colleges and an audience gathered from thirty miles around. At Marshall was a group of fine men and women, and it all came to climax at Fort Worth.</p>
<p>“Are you going to Fort Worth” everybody asked, knowing of the recent riot. I went. I spoke to 400 Negroes and a handful of leading whites, and I spoke the clear, plain truth as I conceive it. It was received without dissent or protest and its reception gave me deepest hope and satisfaction.</p>
<p>Atlanta is another story; so here let me end and, in ending, let me thank those who welcomed me, who paid my fees willingly and promptly, who were eager to listen to the message which I brought, not because it was wholly to their liking, but because it was sincere.</p>
<p>All this by way of preface. In later numbers of <span class="small-caps">The&nbsp;Crisis</span> I shall take up these groups and cities in greater detail and tell of their meaning and promise.</p>


</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-du_bois1913" class="csl-entry quarto-appendix-citeas" role="listitem">
Du&nbsp;Bois, W.E.B. 1913. <span>“I Go A-Talking.”</span> <em>The&nbsp;Crisis</em>
6 (3): 130--132. <a href="https://www.dareyoufight.org/Volumes/06/03/i_go_a_talking.html">https://www.dareyoufight.org/Volumes/06/03/i_go_a_talking.html</a>.
</div></div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/www\.dareyoufight\.org");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>