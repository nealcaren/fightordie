<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.45">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="W.E.B. Du&nbsp;Bois">
<meta name="dcterms.date" content="1921-05-01">

<title>To The World – Dare You Fight</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../../styles.css">
<meta name="citation_title" content="To The World">
<meta name="citation_author" content="W.E.B. Du&nbsp;Bois">
<meta name="citation_publication_date" content="1921-05-01">
<meta name="citation_cover_date" content="1921-05-01">
<meta name="citation_year" content="1921">
<meta name="citation_online_date" content="1921-05-01">
<meta name="citation_fulltext_html_url" content="https://www.dareyoufight.org/Volumes/23/01/to_the_world.html">
<meta name="citation_issue" content="1">
<meta name="citation_volume" content="23">
<meta name="citation_language" content="en">
<meta name="citation_firstpage" content="5">
<meta name="citation_lastpage" content="10">
<meta name="citation_journal_title" content="The&nbsp;Crisis">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../../Images/logo.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../../../index.html">
    <span class="navbar-title">Dare You Fight</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../listing.html"> 
<span class="menu-text">Articles</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../backround.html"> 
<span class="menu-text">Background</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../covers.html"> 
<span class="menu-text">Covers</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../credits.html"> 
<span class="menu-text">Credits</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">To The World</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>W.E.B. Du&nbsp;Bois </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">May 1, 1921</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<h2 class="anchored">
(Manifesto of the Second Pan-African Congress.)
</h2>
<p>The absolute equality of races,—physical, political and social—is the founding stone of world peace and human advancement. No one denies great differences of gift, capacity and attainment among individuals of all races, but the voice of science, religion and practical politics is one in denying the God-appointed existence of super-races, or of races naturally and inevitably and eternally inferior.</p>
<p>That in the vast range of time, one group should in its industrial technique, or social organization, or spiritual vision, lag a few hundred years behind another, or forge fitfully ahead, or come to differ decidedly in thought, deed and ideal, is proof of the essential richness and variety of human nature, rather than proof of the co-existence of demi-gods and apes in human form. The doctrine of racial equality does not interfere with individual liberty, rather, it fulfils it. And of all the various criteria by which masses of men have in the past been prejudged and classified, that of the color of the skin and texture of the hair, is surely the most adventitious and idiotic.</p>
<p>It is the duty of the world to assist in every way the advance of the backward and suppressed groups of mankind. The rise of all men is a menace to no one and is the highest human ideal; it is not an altruistic benevolence, but the one road to world salvation.</p>
<p>For the purpose of raising such peoples to intelligence, self-knowledge and self-control, their intelligentsia of right ought to be recognized as the natural leaders of their groups.</p>
<p>The insidious and dishonorable propaganda, which, for selfish ends, so distorts and denies facts as to represent the advancement and development of certain races of men as impossible and undesirable, should be met with widespread dissemination of the truth. The experiment of making the Negro slave a free citizen in the United States is not a failure; the attempts at autonomous government in Haiti and Liberia are not proofs of the impossibility of selfgovernment among black men; the experience of Spanish America does not prove that mulatto democracy will not eventually succeed there; the aspirations of Egypt and India are not successfully to be met by sneers at the capacity of darker races.</p>
<p>We who resent the attempt to treat civilized men as uncivilized, and who bring in our hearts grievance upon grievance against those who lynch the untried, disfranchise the intelligent, deny self-government to educated men, and insult the helpless, we complain; but not simply or primarily for ourselves—more especially for the millions of our fellows, blood of our blood, and flesh of our flesh, who have not even what we have—the power to complain against monstrous wrong, the power to see and to know the source of our oppression.</p>
<p>How far the future advance of mankind will depend upon the social contact and physical intermixture of the various strains of human blood is unknown, but the demand for the interpenetration of countries and intermingling of blood has come, in modern days, from the white race alone, and has been imposed upon brown and black folks mainly by brute force and fraud. On top of this, the resulting people of mixed race have had to endure innuendo, persecution, and insult, and the penetrated countries have been forced into semi-slavery.</p>
<p>If it be proven that absolute world segregation by group, color or historic affinity is best for the future, let the white race leave the dark world and the darker races will gladly leave the white. But the proposition is absurd. This is a world of men, of men whose likenesses far outweigh their differences; who mutually need each other in labor and thought and dream, but who can successfully have each other only on terms of equality, justice and mutual respect. They are the real and only peacemakers who work sincerely and peacefully to this end.</p>
<p>The beginning of wisdom in interracial contact is the establishment of political institutions among suppressed peoples. The habit of democracy must be made to encircle the earth. Despite the attempt to prove that its practice is the secret and divine gift of the few, no habit is more natural or more widely spread among primitive people, or more easily capable of development among masses. Local self-government with a minimum of help and oversight can be established tomorrow in Asia, in Africa, in America and in the Isles of the Sea. It will in many instances need general control and guidance, but it will fail only when that guidance seeks ignorantly and consciously its own selfish ends and not the people’s liberty and good.</p>
<p>Surely in the 20th century of the Prince of Peace, in the millenium of Buddha and Mahmoud, and in the mightiest Age of Human Reason, there can be found in the civilized world enough of altruism, learning and benevolence to develop native institutions for the native’s good, rather than continue to allow the majority of mankind to be brutalized and enslaved by ignorant and selfish agents of commercial institutions, whose one aim is profit and power for the few.</p>
<p>And this brings us to the crux of the matter: It is the shame of the world that today the relation between the main groups of mankind and their mutual estimate and respect is determined chiefly by the degree in which one can subject the other to its service, enslaving labor, making ignorance compulsory, uprooting ruthlessly religion and customs, and destroying government, so that the favored Few may luxuriate in the toil of the tortured Many. Science, Religion and Philanthropy have thus been made the slaves of world commerce and industry, and bodies, minds, souls of Fiji and Congo, are judged almost solely by the quotations on the Bourse.</p>
<p>The day of such world organization is past and whatever excuse be made for it in other ages, the 20th century must come to judge men as men and not as material and labor.</p>
<p>The great industrial problem which has hitherto been regarded as the domestic problem of culture lands, must be viewed far more broadly, if it is ever to reach just settlement. Labor and capital in England, France and America can never solve their problem as long as a similar and vastly greater problem of poverty and injustice marks the relations of the whiter and darker peoples. It is shameful, unreligious, unscientific and undemocratic that the estimate, which half the peoples of earth put on the other half, depends mainly on their ability to squeeze profit out of them.</p>
<p>If we are coming to recognize that the great modern problem is to correct maladjustment in the distribution of wealth, it must be remembered that the basic maladjustment is in the outrageously unjust distribution of world income between the dominant and suppressed peoples; in the rape of land and raw material, and monopoly of technique and culture. And in this crime white labor is particeps criminis with white capital. Unconsciously and consciously, carelessly and deliberately, the vast power of the white labor vote in modern democracies has been cajoled and flattered into imperialistic schemes to enslave and debauch black, brown and yellow labor, until with fatal retribution, they are themselves today bound and gagged and rendered impotent by the resulting monopoly of the world’s raw material in the hands of a dominant, cruel and irresponsible few.</p>
<p>And, too, just as curiously, the educated and cultured of the world, the well-born and well-bred, and even the deeply pious and philanthropic, receive their training and comfort and luxury, the ministrations of delicate beauty and sensibility, on condition that they neither inquire into the real source of their income and the methods of distribution or interfere with the legal props which rest on a pitiful human foundation of writhing white and yellow and brown and black bodies.</p>
<p>We claim no perfectness of our own nor do we seek to escape the blame which of right falls on the backward for failure to advance, but noblesse oblige, and we arraign civilization and more especially the colonial powers for deliberate transgressions of our just demands and their own better conscience.</p>
<p>England, with her Pax Britannica, her courts of justice, established commerce and a certain apparent recognition of native law and customs, has nevertheless systematically fostered ignorance among the natives, has enslaved them and is still enslaving some of them, has usually declined even to try to train black and brown men in real self-government, to recognize civilized black folks as civilized, or to grant to colored colonies those rights of self-government which it freely gives to white men.</p>
<p>Belgium is a nation which has but recently assumed responsibility for her colonies, and has taken some steps to lift them from the worst abuses of the autocratic regime; but she has not confirmed to the people the possession of their land and labor, and she shows no disposition to allow the natives any voice in their own government, or to provide for their political future. Her colonial policy is still mainly dominated by the banks and great corporations. But we are glad to learn that the present government is considering a liberal program of reform for the future.</p>
<p>Portugal and Spain have never drawn a legal caste line against persons of culture who happen to be of Negro descent. Portugal has a humane code for the natives and has begun their education in some regions. But, unfortunately, the industrial concessions of Portuguese Africa are almost wholly in the hands of foreigners whom Portugal cannot or will not control, and who are exploiting land and re-establishing the African slave trade.</p>
<p>The United States of America after brutally enslaving millions of black folks suddenly emancipated them and began their education; but it acted without system or forethought, throwing the freed men upon the world penniless and landless, educating them without thoroughness and system, and subjecting them the while to lynching, lawlessness, discrimination, insult and slander, such as human beings have seldom endured and survived. To save their own government, they enfranchized the Negro and then when danger passed, allowed hundreds of thousands of educated and civilized black folk to be lawlessly disfranchised and subjected to a caste system; and, at the same time, in 1176, 1812, 1861, 1897, and 1917, they asked and allowed thousands of black men to offer up their lives as a sacrifice to the country which despised and despises them.</p>
<p>France alone of the great colonial powers has sought to place her cultured black citizens on a plane of absolute legal and social equality with her white and given them representation in her highest legislature. In her colonies she has a widespread but still imperfect system of state education. This splendid beginning must be completed by widening the political basis of her native government, by restoring to the indigenes the ownership of the soil, by protecting native labor against the aggression of established capital, and by asking no man, black or white, to be a soldier unless the country gives him a voice in his own government.</p>
<p>The independence of Abyssinia, Liberia Haiti and San Domingo, is absolutely necessary to any sustained belief of the black folk in the sincerity and honesty of the white. These nations have earned the right to be free, they deserve the recognition of the world; notwithstanding ell their faults and mistakes, and the fact that they are behind the most advanced civilization of the day, nevertheless they compare favorably with the past, and even more recent, history of most European nations, and it shames civilization that the treaty of London practically invited Italy to aggression in Abyssinia, and that free America has unjustly and cruelly seized Haiti, murdered and for a time enslaved her workmen, overthrown her free institutions by force, and has so far failed in return to give her a single bit of help, aid or sympathy.</p>
<p>What do those wish who see these evils of the color line and racial discrimination and who believe in the divine right of suppressed and backward peoples to learn and aspire and be free?</p>
<p>The Negro race through its thinking intelligentsia is demanding:</p>
<ol type="I">
<li>
<p>The recognition of civilized men as civilized despite their race or color</p>
</li><li>
<p>Local self government for backward groups, deliberately rising as experience and knowledge grow to complete self government under the limitations of a self governed world</p>
</li><li>
<p>Education in self knowledge, in scientific truth and in industrial technique, undivorced from the art of beauty</p>
</li><li>
<p>Freedom in their own religion and social customs, and with the right to be different and non-conformist</p>
</li><li>
<p>Co-operation with the rest of the world in government, industry and art on the basis of Justice, Freedom and Peace</p>
</li><li>
<p>The ancient common ownership of the land and its natural fruits and defence against the unrestrained greed of invested capital</p>
</li><li>
<p>The establishment under the League of Nations of an international institution for the study of Negro problems</p>
</li><li>
<p>The establishment of an international section in the Labor Bureau of the League of Nations, charged with the protection of native labor.</p>
</li></ol>
<p>The world must face two eventualities: either the complete assimilation of Africa with two or three of the great world states, with political, civil and social power and privileges absolutely equal for its black and white citizens, or the rise of a great black African state founded in Peace and Good Will, based on popular education, natural art and industry and freedom of trade; autonomous and sovereign in its internal policy, but from its beginning a part of a great society of peoples in which it takes its place with others as co-rulers of the world.</p>
<p>In some such words and thoughts as these we seek to express our will and ideal, and the end of our untiring effort. To our aid we call all men of the Earth who love Justice and Mercy. Out of the depths we have cried unto the deaf and dumb masters of the world. Out of the depths we cry to our own sleeping souls.</p>
<p>The answer is written in the stars.</p>
<!-- Similar articles start here -->
<hr>
<section id="related-articles" class="level4">
<h4 class="anchored" data-anchor-id="related-articles">Related Articles:</h4>
<ul>
<li><a href="../../../Volumes/37/02/smuts.html">Smuts (1930)</a></li>
<li><a href="../../../Volumes/28/03/unity.html">Unity (1924)</a></li>
<li><a href="../../../Volumes/14/02/resolutions.html">Resolutions of the Washington Conference (1917)</a></li>
<li><a href="../../../Volumes/02/04/races.html">Races (1911)</a></li>
<li><a href="../../../Volumes/22/01/drive.html">The Drive (1922)</a></li>
</ul>
<!-- Similar articles end here -->


</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-du_bois1921" class="csl-entry quarto-appendix-citeas" role="listitem">
Du&nbsp;Bois, W.E.B. 1921. <span>“To The World.”</span> <em>The&nbsp;Crisis</em>
23 (1): 5–10. <a href="https://www.dareyoufight.org/Volumes/23/01/to_the_world.html">https://www.dareyoufight.org/Volumes/23/01/to_the_world.html</a>.
</div></div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/www\.dareyoufight\.org");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>