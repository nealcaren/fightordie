<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.45">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="W.E.B. Du&nbsp;Bois">
<meta name="dcterms.date" content="1933-06-01">

<title>The Strategy of the Negro Voter – Dare You Fight</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../../styles.css">
<meta name="citation_title" content="The Strategy of the Negro Voter">
<meta name="citation_author" content="W.E.B. Du&nbsp;Bois">
<meta name="citation_publication_date" content="1933-06-01">
<meta name="citation_cover_date" content="1933-06-01">
<meta name="citation_year" content="1933">
<meta name="citation_online_date" content="1933-06-01">
<meta name="citation_fulltext_html_url" content="https://www.dareyoufight.org/Volumes/40/06/strategy_of_the_negro_voter.html">
<meta name="citation_issue" content="6">
<meta name="citation_volume" content="40">
<meta name="citation_language" content="en">
<meta name="citation_firstpage" content="140">
<meta name="citation_lastpage" content="142">
<meta name="citation_journal_title" content="The&nbsp;Crisis">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../../Images/logo.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../../../index.html">
    <span class="navbar-title">Dare You Fight</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../about.html"> 
<span class="menu-text">Introduction</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../listing.html"> 
<span class="menu-text">Articles</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../credits.html"> 
<span class="menu-text">Credits</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../covers.html"> 
<span class="menu-text">Covers</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">The Strategy of the Negro Voter</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>W.E.B. Du&nbsp;Bois </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">June 1, 1933</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p>Usually, <span class="small-caps">The&nbsp;Crisis</span> has discussed voting among Negroes during elections and sought to give specific advice concerning the action of black voters.</p>
<p>In the discussion today, however, it is perhaps better that in the calm that succeeds a presidential election, we should more carefully ask ourselves, what the object of our voting is, and by what methods and strategy we are going to be able to accomplish it?</p>
<p>A generation ago, we assumed that democratic methods of social reform in the United States were properly established and working toward their goal, and that the major problem of the American Negro was to share effectively in the machinery of government, and to be counted according to his numbers as one of the objects of uplift. We did not question then but what universal suffrage was able to bring to all, popular education, industrial efficiency and economic justice, by slow but progressive reform movements. And as Negroes, we asked only for the right to vote on the same terms that other persons voted, and the right to share in the benefits of reform.</p>
<section id="universal-suffrage" class="level2">
<h2 class="anchored" data-anchor-id="universal-suffrage">Universal Suffrage</h2>
<p>Since then, and particularly in these post-war days, we have with some difficulty and searching of soul, come to the conclusion that the program of reform through universal suffrage is not moving as it should and might. That on the contrary, the economic and industrial organization of the world is such that democracy, even among the more advanced white nations, is singularly ineffective. And that if the masses are going to achieve incomes adequate to a decent livelihood, and the economic justice which is the only basis of a broad human culture, a revolution in the control and method of our present political activities must come.</p>
<p>If this conviction is true, and it is shared by so large a proportion of the best and keenest thought of the world, that it can hardly today be questioned, then the problem of the Negro voter becomes dynamic rather than static, and relative rather than absolute; that is, he has to ask himself: What am I going to do with my vote and my work and my other activities, so that I may not simply escape racial and class discrimination, but may also help the world in its progress toward human emancipation?</p>
<p>Manifestly, this is no easy task, particularly in a country like the United States, where the Negro forms a decided minority, and is discriminated against in almost every particular, by all the elements of the population,—the artist and the religious worker; especially by the employer and organizer of industry; and last but not least by the whole of the white laboring class.</p>
</section>
<section id="votes" class="level2">
<h2 class="anchored" data-anchor-id="votes">2,000,000 Votes</h2>
<p>We are asking, here particularly under these circumstances, what is the Negro going to do with the right to vote which he possesses now to the extent of at least 2,000,000 votes, and which through determined court action, the attack on the “white primary,” the attack on the jury system, and careful use of his balance of power, is destined greatly to increase within the next decade.</p>
<p>The Negro faces two major political parties: the Democrats and the Republicans. They stand essentially for the same thing. They represent a dictatorship of organized industry which is running the United States for the benefit of the owners of wealth. Perhaps the most characteristic thing of our present era is the frankness with which this truth is today openly admitted. What difference does it make, then, whether the Negro votes the Republican or Democratic ticket? He is voting for the same essential dictatorship. Both parties agree in a policy which nullifies the popular vote, limits the wages of common labor, monopolizes capital and land, supports the state mainly by taxes upon the poor, and increases the income of the rich by privilege and administration.</p>
<p>Third parties of various kinds bid for the Negro vote; reform movements, Populist and Socialist parties, and today, the Communists. The ability of any of these parties to carry elections according to present conditions is from the very start hindered and made almost impossible by the rotten boroughs of the South, based on Negro disfranchisement. This fact, from time to time, the Negro has impressed upon Third Parties. But from the day of the Bull Moose, down to that of the L. I. P. A., no effective attack upon this situation has been even initiated, while the more radical parties openly ask the Negro to join white labor in mass action to gain their ends by force.</p>
</section>
<section id="white-labor" class="level2">
<h2 class="anchored" data-anchor-id="white-labor">White Labor</h2>
<p>But as <span class="small-caps">The&nbsp;Crisis</span> has continually pointed out, the white laboring class and the middle class of clerks and merchants and engineers are the bitterest and most implacable enemies of Negroes. It is to no purpose that thoughtful observers remind Negroes that the Negro prejudice of laborers and clerks is the result of ignorance and often of the machination of the employing and investing classes. That fact, of which the Negro is perfectly aware, can have no essential effect upon his actions, because in the present organization or industry he must get his living mainly as a concession from the employer and the capitalist and this will remain true in his case so long as his fellow white laborer will not permit him to enter industry on equal terms, or consent to fight with him for higher wages and more decent conditions of work. Thus the Negro worker has absolutely no choice but to accept what the employers offer, or starve. There are today among Negroes:</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th><!-- --></th>
<th><!-- --></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>57,000</td>
<td>Coal Miners.</td>
</tr>
<tr class="even">
<td>12,000</td>
<td>Masons.</td>
</tr>
<tr class="odd">
<td>32,000</td>
<td>Carpenters.</td>
</tr>
<tr class="even">
<td>18,000</td>
<td>Stationary firemen.</td>
</tr>
<tr class="odd">
<td>26,000</td>
<td>Mechanics.</td>
</tr>
<tr class="even">
<td>13,000</td>
<td>Plasterers.</td>
</tr>
<tr class="odd">
<td>130,000</td>
<td>In iron and steel industries.</td>
</tr>
<tr class="even">
<td>100,000</td>
<td>Railway Laborers.</td>
</tr>
<tr class="odd">
<td>5,000</td>
<td>Plumbers.</td>
</tr>
<tr class="even">
<td>8,000</td>
<td>Molders.</td>
</tr>
</tbody>
</table>
<p>All these black men and thousands of others have gotten their jobs and are keeping them by fighting the effort of white labor to keep bread and butter from their mouths. In most of the more highly skilled and better paid branches of labor and industry, the white workers have been successful, and today, no matter what the skill of a colored locomotive engineer might be, or a colored telegrapher, or a chemist, or an engraver, or an electrician, or a business manager, the doors of most industrial organizations are slammed fast in his face, simply and solely on account of his color.</p>
<p>In those semi-skilled and unskilled jobs which he holds, he has gotten them only by scabbing and underbidding the white worker. And where he is a member of a trade union, he is tolerated only to keep him from working for less wages than the whites, and he is subjected to every discrimination within the Union that the Union dare apply. Naturally, there are exceptions to these sweeping general statements, but in the main, they are true.</p>
<p>When, therefore, Third Parties appeal to the clerks and laborers of the land, they appeal to potential enemies of the black man as things are today. Or if, as in the case of the Communists, an appeal is made on the basis of no racial discrimination, white labor does not give the slightest response to the appeal, and the Communist vote is less than negligible.</p>
</section>
<section id="opportunism" class="level2">
<h2 class="anchored" data-anchor-id="opportunism">Opportunism</h2>
<p>Under these circumstances, how is a Negro to vote? Manifestly, his voting program has got to be purely opportunist. In the long run, and in the end, he wants his vote to help in the re-organization of society, and particularly the re-organization of the economic basis of society upon which social development depends. From this great end, he must never swerve. But in approaching it, he must see to it that his interests, his essential rights and his well being are not deliberately sacrificed, in so far as they are not inconsistent with the well being of mankind. No one has a right to make the black man a bloody sacrifice on the altar of advance simply because he is weak and unable to defend himself, and when such sacrifice is absolutely uncalled for. Recognizing then that political action seeking reform movements are just and necessary steps toward the realization of permanent betterment of man, the Negro can carefully follow such a program of reform as Karl Marx laid down in his Communist Manifesto, recognizing that such steps may prove pitably inadequate to the great end of re-making this world, but, nevertheless, for a minority they are steps forward and as such, better than inaction or retreat.</p>
<p>Such a program for American Negroes includes universal education of youth, adult education, the taxation of the rich with the avowed purpose of redistributing income, the appropriation by the state of the unearned increment on land values and other monopoly, the reduction of the tariff on imports, the protection of the ballot and proportional representation for minorities, the prevention of crime and reform of criminals, minimum wage standards, limitation of the right of inheritance, state control of banking and credit, increasing state ownership of industry, especially of railroads and public service corporations,</p>
<p>Whenever and wherever there is a chance for the Negro to cast his vote in favor of such measures, he should do so, only insisting that in their application there be no discrimination on account of color or race. Beyond this, when a Third Party asks for his vote, he should insist upon specific promises to attack and abate color discrimination throughout the country and in every particular, and in the absence of such promises, he should refuse categorically any political support. When such promises are made his next step is to see whether those who promise have the power to fulfill.</p>
<p>## Communists</p>
<p>It makes no difference how much the Communist Party may promise the Negro, so long as the white people of the country refuse support, it is idiotic for the colored people to throw their votes away. Moreover, in the case of the Communists there is acute danger that the Negro vote will be deliberately sacrificed to ulterior purposes. For instance, there are in the United States 700,000 Negro farm tenants. Some of them rent land on a money basis and are as well off or as poorly off as the corresponding class of whites. But at least 400,000 of these tenants are share croppers, and their economic condition, under the laws and usages of the South, is but little removed from slavery. Moreover, there is naturally a much larger number of white share croppers whose situation is practically almost as bad as that of the Negroes.</p>
<p>Without plan or apparent forethought, the Communists sent agitators down into a rural county of northern Alabama, and induced the wretched Negro sharecroppers to form a “Union.” The result was an immediate clash with the authorities; the Communist organizers ran away, and a half-dozen black men face a term in the penitentiary.</p>
<p>If the object of this maneuver was simply to stir up trouble, it succeeded, but at bitter expense to deluded Negroes. If its object was to organize the victims of the share crop system, in order to resist exploitation, and to lead to steps for betterment, then the whole thing was doomed to failure from the beginning because the white sharecroppers of that particular part of Alabama would rather starve than unite in an organization with Negroes. It may well be that this attitude on their part is the result of silly ignorance and instigated directly or indirectly by the land holders and capitalists. But whatever its cause may be, it is a fact, and to ignore such a fact is stupid and wrong.</p>
</section>
<section id="our-goal" class="level2">
<h2 class="anchored" data-anchor-id="our-goal">Our Goal</h2>
<p>These incidents illustrate the avowedly opportunist program of the intelligent Negro voter. Keeping his eye upon ideals, and measures which make for the uplift of mankind, and particulary for the establishment of a state ruled by the working classes for the benefit of all the workers, his object is so to use his vote as to accomplish any and all reforms leading toward the great goal, so long as he is able, simultaneously and in the same degree to break down color caste. No matter how fair the promises or programs of parties may be, Negroes will refuse to support them unless they can show an object compatible with the Negro’s survival and reasonable power to carry this out. He will tell both Socialists and Communists that their first job is to make the American working classes free from color prejudice. And that until they do this, the Negro refuses to give up his chance to make a living, in order to put bread and butter into the mouths of his enemies.</p>
<!-- Similar articles start here -->
<hr>
<section id="related-articles" class="level4">
<h4 class="anchored" data-anchor-id="related-articles">Related Articles:</h4>
<ul>
<li><a href="../../../Volumes/19/02/votes.html">Votes (1919)</a></li>
<li><a href="../../../Volumes/36/11/negro_in_politics.html">The Negro in Politics (1929)</a></li>
<li><a href="../../../Volumes/15/01/oath_of_the_negro_voter.html">The Oath of the Negro Voter (1918)</a></li>
<li><a href="../../../Volumes/12/06/presidential_campaign.html">The Presidential Campaign (1916)</a></li>
<li><a href="../../../Volumes/15/01/votes_for_women.html">Votes for Women (1918)</a></li>
</ul>
<!-- Similar articles end here -->


</section>
</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-du_bois1933" class="csl-entry quarto-appendix-citeas" role="listitem">
Du&nbsp;Bois, W.E.B. 1933. <span>“The Strategy of the Negro Voter.”</span>
<em>The&nbsp;Crisis</em> 40 (6): 140–42. <a href="https://www.dareyoufight.org/Volumes/40/06/strategy_of_the_negro_voter.html">https://www.dareyoufight.org/Volumes/40/06/strategy_of_the_negro_voter.html</a>.
</div></div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/www\.dareyoufight\.org");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>