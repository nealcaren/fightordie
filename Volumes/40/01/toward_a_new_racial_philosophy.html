<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.45">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Du Bois, W.E.B.">
<meta name="dcterms.date" content="1933-01-01">

<title>Toward a New Racial Philosophy – Dare You Fight</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../../styles.css">
<meta name="citation_title" content="Toward a New Racial Philosophy">
<meta name="citation_author" content="Du Bois, W.E.B.">
<meta name="citation_publication_date" content="1933-01-01">
<meta name="citation_cover_date" content="1933-01-01">
<meta name="citation_year" content="1933">
<meta name="citation_online_date" content="1933-01-01">
<meta name="citation_fulltext_html_url" content="https://www.dareyoufight.org/Volumes/40/01/toward_a_new_racial_philosophy.html">
<meta name="citation_issue" content="1">
<meta name="citation_volume" content="40">
<meta name="citation_language" content="en">
<meta name="citation_firstpage" content="20">
<meta name="citation_lastpage" content="22">
<meta name="citation_journal_title" content="The Crisis">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../../index.html">
    <span class="navbar-title">Dare You Fight</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../about.html"> 
<span class="menu-text">Introduction</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../listing.html"> 
<span class="menu-text">Articles</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../covers.html"> 
<span class="menu-text">Covers</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Toward a New Racial Philosophy</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Du Bois, W.E.B. </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">January 1, 1933</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p>A college graduate came to me yesterday and asked: “What has the N.A.A.C.P. published concerning the present problems of the Negro, and especially of young Negroes just out of college?”</p>
<p>I started to answer with stereotyped remarks; and then I said suddenly, “Nothing.”</p>
<p>The N.A.A.C.P., beginning nearly a quarter of a century ago, formulated on the basis of the problems which then faced Negroes, a clear-cut and definite program. This program we have followed ever since with unusual success for it has expressed during these years the aspirations and lines of effort among 12 millions and their friends.</p>
<p>Today the situation has changed enormously in its trend, objects and details, and there is both need and widespread demand for a re-examination of what is called the Negro problem from the point of view of the middle of the 20th Century. <span class="small-caps">The Crisis</span> realizes this and it proposes during 1933 to discuss the present Negro problems from 12 points of view. Tentatively, these points seem to us now to be something as follows, although we may change many of them:</p>
<ol type="1">
<li><p><em>Birth</em>. The physical survival of the Negro in America is discussed in this number.</p></li>
<li><p><em>Health</em>. In February, we shall ask: How can the infant mortality, the great loss from sickness and the general death rate among Negroes, be lowered? What is the duty of colored physicians toward Negro health? What is the extent of available hospitalization? How can we extend the life term and meet such enemies of our race as tuberculosis, pneumonia, syphilis and cancer. <br><br> Later, we shall treat our problems in something like the following order: <br><br></p></li>
<li><p><em>The Home</em>. Should a Negro family live in the city or in the country, in the North or in the South, in a single house or in an apartment? And on what facts should an individual family base its decision? How can housework be reduced and systematized? Must paid household help be an ideal? Should Negroes seek to live in their own neighborhoods or in white neighborhoods?</p></li>
<li><p><em>Occupations</em>. What kinds of work do Negroes want to do and what kind can they do and what kinds are they allowed to do? How far shall they be farmers, artisans, artists, professional men, merchants or financiers? What is their relation to the great economic and industrial changes going on now in the world of work? How far are they being displaced by machines and technique and by new organizations of capital? Can they achieve a place of power and efficiency in the present oligarchy of white capital or in the present labor union or in any future industrial democracy?</p></li>
<li><p><em>Education</em>. Should a colored child be sent to a white school or to a colored school? Should it be educated in the North or South or even abroad? What should be the kind and aim and length of its education? Should the boy or girl go to college? Should they go to technical school? Should they go to professional school? Should they be apprenticed to manual work? Should they depend for their education upon experience? How far is their education dependent upon contact with the white group and its larger opportunities? How shall the cost of education be met?</p></li>
<li><p><em>Income</em>. What should be the ideal and standards of living among colored people? How much income must the average colored family have and how should it be spent? How early can our young people get married? What things must they regard as luxuries and beyond them and what as necessities? Shall we aim to be rich or make poverty an ideal?</p></li>
<li><p><em>Discrimination</em>. Accepting race and color discrimination as a fact which despite all effort’s bound to last in some form at least through this generation, if not longer, what shall be our general attitude toward it? How can we avoid in its face an inferiority complex? How far must we be belligerent or acquiescent? Can we meet discrimination by ignoring it or by fighting it? When shall we fight and how shall we fight, and what is the cost of effective fighting? What types of organized effort are needed in this fighting? How much of co-operation with the whites must be sought or accepted? How far must we be willing recipients of white co-operation, philanthropy and charity? How can we escape discrimination by emigration to other states, countries or continents?</p></li>
<li><p><em>Government and Law</em>. How far must we be obedient to government and law when they are unfair to us? Can we adopt an attitude of defiance? How can we change our legal status or reform evil administration? Is revolution by force advisable, possible or probable? Can we use our right to vote, curtailed as it is, for our emancipation and change of status? Should we vote for the Republican Party or the Democratic Party; or for Socialists or Communists? Or should we adopt a method of independent opportunism in our voting? In states and cases where we are disfranchised, what shall we do about it? Is it worth while to register, even though we cannot vote or cannot vote effectively? Should we join the Democratic White Primary in the South? Should we in our voting keep our racial needs and demands in mind, or should we have an eye upon the good of the majority of the nation? And what shall we do in case these two ideals clash? How far are we criminal and antisocial? What causes and what can prevent crime? How are our criminals treated?</p></li>
<li><p><em>Race Pride</em>. How far shall American Negroes remember and preserve their history, keep track of their ancestry, build up a racial literature and a group patriotism? What does loyalty to the race mean? How far shall we have distinctively race organizations, and how far shall we seek to join organizations regardless of race? If we do have organizations, what sorts are needed for the various ends we have in view? How far do present organizations fill our need or how shall they be changed and what new ones must come? Shall we imitate and duplicate, on our side of the color line, the organizations that white folk have? Especially, of what use are secret fraternities and how can their functioning be made to help our general uplift? What is our relation to Africa, to the West Indies, to Asia, to the colored world in general? Is it profitable or advisable consciously to build up by race pride a nation within a nation, or races within the world?</p></li>
<li><p><em>Religion</em>. We are by tradition a religious people and the “old-time religion” still has a strong hold on our masses. The present Negro church more nearly represents the mass of people than any other organization and its ministers are its spokesmen. Nevertheless, the number of colored people who do not go to church is large and growing. Is this right, and if not, what is the remedy? What should be the function of the Negro church? How far should there be churches divided along the color line? What is the present status of creeds? How far do we dare disturb simple religious faith, “evangelical” dogma and ordinary religious superstition? Should a man join a church and work with it if he does not believe completely in its dogma? Can the Negro church be made a center and unit of racial and cultural and social development? Will Creed and Culture, Reason and Faith, Science and Superstition clash as in other groups and ages? What should be the attitude of the Negro church toward white churches? How far should they co-operate in missions and philanthropy? How far is the white church, with its greater wealth and experience, pauperizing certain colored churches? What is the remedy? Will Christianity abolish or emphasize the Color Line? How can we, with or without religion, encourage courtesy, honor, unselfishness, sacrifice, self restraint, the ideals of the higher spiritual life, the recognition of beauty in Art and deed?</p></li>
<li><p><em>Social Contacts</em>. Is the method of advance among colored people today a building up of social classes so that the educated, the rich, the well-to-do and the moral can separate themselves from the poor, the ignorant and the criminal? Can this class-building technique of civilization be ignored in our case and something better substituted? How far must colored people try to accumulate wealth and become the employers of other Negroes and even of whites? Must we have a bourgeoisie for defense in a bourgeois world? What should be our social standards in marriage? Should we encourage our children to inter-marry with white folk, or at any rate, to increase the social contacts between colored and white people with the ultimate ideal of marriage? And if not, where can the line be drawn? In the absence of social contact with more favored persons and races, is it possible for culture among us to grow or to grow as fast? Should we demand and practice social equality? Should we regard the development of lower masses among our people as inevitable, and if so, what should be our attitude toward these masses? What should be our attitude toward social questions beyond our own racial orders, toward world problems of peace and war, the labor movement, the status of women, education, health, social and economic reform?</p></li>
<li><p><em>Recreation</em>. How can we get the relaxation of play and recreation without having it spoiled by discrimination along the color line? Should we travel, and if we travel, should we seek or avoid white people? Where can we spend our vacations? Where can we bathe in the ocean unmolested and not insulted? What should be our attitude toward discrimination in transport, railroad trains, buses and hotels? Where shall we be willing to sit in theatres and at concerts? If we seek recreation only in those places where there is no discrimination, will that help uplift by increasing our pleasure or will it encourage the growth of further discrimination?</p></li>
</ol>
<p>The above is a tentative outline of 12 sets of problems. Further reflection will doubtless change and add to them. There are doubtless important omissions. <span class="small-caps">The Crisis</span> would welcome from readers suggestions as to these heads.</p>
<p>In the meantime, it is our present plan to publish a discussion of one of these subjects in each of the next 12 numbers <span class="small-caps">The Crisis</span>, which will exhibit different points of view concerning the main problems suggested. We would be glad to have contributions or suggestions as to persons who might contribute to these symposiums. Of necessity, the contributions must be terse and to the point, and, of course, we cannot publish all. Beside the editorial statement of the problem, and papers discussing two or more sides of the problem, we are going to try to get hold of 12 pieces of fiction which will illustrate the problems humanly. We admit it is going to be a hard thing to do this.</p>
<p>What we want is suggested by the story this month—“The Three Mosquitoes.” Do you like it? Is it worth while? Such stories must be short,—not more than two pages of <span class="small-caps">The Crisis</span>,—and they must illustrate the difficulties and contradictions of each of these 12 suggested matters of thought. They must not be “defeatist;” we want them to be artistic; we want them true: but we do not propose to have every story end in a lynching or a suicide, for the simple reason that we do not believe that death is the necessary answer to any of these situations.</p>
<p>Finally, we welcome from everybody, terse, definite and pointed opinions, which we shall try to reflect and quote.</p>



<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-bois,_w.e.b.1933" class="csl-entry quarto-appendix-citeas" role="listitem">
Bois, W.E.B., Du. 1933. <span>“Toward a New Racial Philosophy.”</span>
<em>The Crisis</em> 40 (1): 20–22. <a href="https://www.dareyoufight.org/Volumes/40/01/toward_a_new_racial_philosophy.html">https://www.dareyoufight.org/Volumes/40/01/toward_a_new_racial_philosophy.html</a>.
</div></div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/www\.dareyoufight\.org");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>