<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.45">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="W.E.B. Du&nbsp;Bois">
<meta name="dcterms.date" content="1928-08-01">

<title>The Negro Voter – Dare You Fight</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../../styles.css">
<meta name="citation_title" content="The Negro Voter">
<meta name="citation_author" content="W.E.B. Du&nbsp;Bois">
<meta name="citation_publication_date" content="1928-08-01">
<meta name="citation_cover_date" content="1928-08-01">
<meta name="citation_year" content="1928">
<meta name="citation_online_date" content="1928-08-01">
<meta name="citation_fulltext_html_url" content="https://www.dareyoufight.org/Volumes/35/08/negro_voter.html">
<meta name="citation_issue" content="8">
<meta name="citation_volume" content="35">
<meta name="citation_language" content="en">
<meta name="citation_firstpage" content="275">
<meta name="citation_lastpage" content="276">
<meta name="citation_journal_title" content="The&nbsp;Crisis">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../../Images/logo.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../../../index.html">
    <span class="navbar-title">Dare You Fight</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../listing.html"> 
<span class="menu-text">Articles</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../backround.html"> 
<span class="menu-text">Background</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-more" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">More</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-more">    
        <li>
    <a class="dropdown-item" href="../../../map.html">
 <span class="dropdown-text">Article Map</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../covers.html">
 <span class="dropdown-text">Covers</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../credits.html">
 <span class="dropdown-text">Credits</span></a>
  </li>  
    </ul>
  </li>
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">The Negro Voter</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>W.E.B. Du&nbsp;Bois </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">August 1, 1928</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p>According to the Census of 1920, there were in the United States 60,886,520 persons twenty-one years of age and over. Of these 5,522,475, or a little over 9 per cent were Negroes. Of these Negroes, 1,512,987 were illiterate, leaving a possible Negro voting population of sufficient intelligence to read and write of over 4,000,000. Disfranchisement cuts this figure considerably. Neither whites nor Negroes in the District of Columbia vote. In Virginia, North Carolina, Arkansas, Oklahoma and Texas, there is a considerable Negro vote cast for presidential candidates, but Negro votes are not effective so far as Congressmen are concerned. In South Carolina, Georgia, Florida, Alabama, Mississippi and Louisiana, nine-tenths of the Negroes are disfranchised. The possible Negro vote in these states is 2,722,048. This left in 1920, 2,800,427 possible Negro voters in the United States.</p>
<p>Since that time, the Negro population has increased and the migration from South to North has transferred a considerable number of Negroes from disfranchisement to a territory where they can vote. It will, therefore, be possible for at least 3,000,000 and possibly three and a quarter million of Negroes to vote in the next presidential election.</p>
<p>These voters will be distributed roughly as follows:</p>
<p>In the New England States, there will be 60,000 colored voters, out of a total vote of 4,500,000. In the Middle Atlantic States, there will be 500,000 colored voters, out of a possible 13,500,000. In the East North Central States, there will be 450,000 colored voters, out of a possible 13,000,000. In the West North Central States, 200,000 colored voters, out of a possible 7,250,000. In the South Atlantic States, the Negro voters will be ineffective except in Delaware, Maryland and West Virginia, where they will cast 250,000 votes, out of a possible 1,750,000. In the Mountain and Pacific States, Negroes will cast perhaps 75,000 votes, out of a possible 5,500,000.</p>
<p>To this must be added two considerations: first of all, all persons, twenty-one years of age and over in the United States for various reasons, do not vote. In the Presidential Election of 1920, only 26,674,171 votes were cast, out of the possible 60,886,520. If the Negro voter is alert, he may, therefore, cast even more than one-tenth of the actual vote, despite disfranchisement in the South. Certainly, in many of the states intelligent use of the Negro vote can bring results.</p>
<p>We may assume that in 1928, the total vote cast in the following states and the Negro vote will be something as follows:</p>
<hr>
<table class="dot-table">
<caption>
Possible Votes, 1928
</caption>
<thead>
<tr>
<th>
</th>
<th>
Total
</th>
<th>
Negro
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
Massachusetts
</td>
<td>
1,150,000
</td>
<td>
25,000
</td>
</tr>
<tr>
<td>
Rhode Island
</td>
<td>
200,000
</td>
<td>
5,000
</td>
</tr>
<tr>
<td>
Connecticut
</td>
<td>
400,000
</td>
<td>
12,000
</td>
</tr>
<tr>
<td>
New York
</td>
<td>
3,300,000
</td>
<td>
150,000
</td>
</tr>
<tr>
<td>
New Jersey
</td>
<td>
1,100,000
</td>
<td>
75,000
</td>
</tr>
<tr>
<td>
Pennsylvania
</td>
<td>
2,150,000
</td>
<td>
200,000
</td>
</tr>
<tr>
<td>
Ohio
</td>
<td>
2,100,000
</td>
<td>
125,000
</td>
</tr>
<tr>
<td>
Indiana
</td>
<td>
1,300,000
</td>
<td>
50,000
</td>
</tr>
<tr>
<td>
Illinois
</td>
<td>
2,500,000
</td>
<td>
125,000
</td>
</tr>
<tr>
<td>
Michigan
</td>
<td>
1,200,000
</td>
<td>
60,000
</td>
</tr>
<tr>
<td>
Iowa
</td>
<td>
1,000,000
</td>
<td>
10,000
</td>
</tr>
<tr>
<td>
Missouri
</td>
<td>
1,400,000
</td>
<td>
125,000
</td>
</tr>
<tr>
<td>
Nebraska
</td>
<td>
475,000
</td>
<td>
10,000
</td>
</tr>
<tr>
<td>
Kansas
</td>
<td>
675,000
</td>
<td>
35,000
</td>
</tr>
<tr>
<td>
Delaware
</td>
<td>
100,000
</td>
<td>
15,000
</td>
</tr>
<tr>
<td>
Maryland
</td>
<td>
375,000
</td>
<td>
140,000
</td>
</tr>
<tr>
<td>
West Virginia
</td>
<td>
600,000
</td>
<td>
50,000
</td>
</tr>
<tr>
<td>
Kentucky
</td>
<td>
850,000
</td>
<td>
125,000
</td>
</tr>
<tr>
<td>
Tennessee
</td>
<td>
400,000
</td>
<td>
225,000
</td>
</tr>
<tr>
<td>
Colorado
</td>
<td>
350,000
</td>
<td>
10,000
</td>
</tr>
<tr>
<td>
Arizona
</td>
<td>
80,000
</td>
<td>
6,000
</td>
</tr>
<tr>
<td>
Washington
</td>
<td>
425,000
</td>
<td>
6,000
</td>
</tr>
<tr>
<td>
California
</td>
<td>
1,300,000
</td>
<td>
40,000
</td>
</tr>
</tbody>
</table>
<p>This, of course, will only be true in case the Negro attends to his election duties with unusual assiduity,—that is, votes even more largely than the white. That he ought to do this arises from his peculiar position. In every single one of these states, the Negro vote is important.</p>
<p>Even in New England, while it forms only two or three per cent of the total vote, nevertheless, it is concentrated in certain strategic centers, like Boston, Providence and New Haven, where it will effect the congressional vote; and with Smith as the Democratic candidate the fight between Protestants and Catholics is going to be so close that the black voters will be needed.</p>
<p>In the industrial East, New York, New Jersey and Pennsylvania, the Negro can cast 425,000 out of 6,500,000 votes. This is between six and seven per cent, and that is a very important bloc. The fight in the East is a fight between organized wealth and industry, on the one hand, and organized labor and radical reform on the other. The issues will be clouded. Smith is no enemy to organized wealth, and Hoover is no friend of organized labor. It will be hard for these elements in many cases to choose between the two leaders. They will have, however, no such difficulty of choice in voting for congressmen and the issues will often be clear-cut and the Negro vote of large importance.</p>
<p>In the Middle West, out of a total of 7,000,000 votes, the Negro should have at least 350,000, or 5 per cent. Wisely used, this means the balance of power, not only in the Presidential Election but in the election of congressmen; because the fight in the Middle West over the issues of liquor, Catholicism, the farmer, labor and industry, is going to be fierce.</p>
<p>The farm issue will, of course, be emphasized in Iowa, Missouri, Nebraska and Kansas. Here again the Negro will have 7 per cent of the vote and he ought to use every ounce of his power to the greatest advantage.</p>
<p>The Southern Border States present, of course, the usual anomaly. In Delaware, Maryland, West Virginia, Kentucky and Tennessee, out of a vote of about 2,225,000, Negroes should cast 25 per cent. This is enough to control the election; but the Negro vote in these states has for a long time been shamelessly manipulated. There is not only open bribery and economic intimidation, but there is the prevailing problem of what the Negro can cast his vote for if he bolts the Republican Party. He dare not vote for the Democrats when the Democrats act as they have recently in Tennessee and he can hardly with self-respect vote with the Republicans of Kentucky. Certainly in Delaware and Maryland the Negro can afford to vote for the local Democratic Ticket in many cases. The results of doing this in the past have proven its wisdom; but it is worth careful thought and prolonged negotiation.</p>
<p>All things considered in the election of 1928, the Negro voter has the greatest chance for intelligent and purposeful independence than has come to him in a generation.</p>
<p>(In future numbers we shall discuss: the effect of disfranchisement in the South; the presidential candidates; the congressional candidates and the issues at stake in the campaign.)</p>
<!-- Similar articles start here -->
<div class="clear-wrap">

</div>
<section id="related-articles" class="level4">
<h4 class="anchored" data-anchor-id="related-articles">Related Articles</h4>
<ul>
<li><a href="../../../Volumes/26/03/political_straws.html">Political Straws (1923)</a></li>
<li><a href="../../../Volumes/30/02/disenfranchisement.html">Disenfranchisement (1925)</a></li>
<li><a href="../../../Volumes/29/02/election.html">The Election (1924)</a></li>
<li><a href="../../../Volumes/19/02/votes.html">Votes (1919)</a></li>
<li><a href="../../../Volumes/01/05/white_primary.html">The White Primary (1911)</a></li>
</ul>
<!-- Similar articles end here -->


</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-du_bois1928" class="csl-entry quarto-appendix-citeas" role="listitem">
Du&nbsp;Bois, W.E.B. 1928. <span>“The Negro Voter.”</span>
<em>The&nbsp;Crisis</em> 35 (8): 275–76. <a href="https://www.dareyoufight.org/Volumes/35/08/negro_voter.html">https://www.dareyoufight.org/Volumes/35/08/negro_voter.html</a>.
</div></div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/www\.dareyoufight\.org");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>