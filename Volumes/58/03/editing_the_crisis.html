<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.45">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="W.E.B. Du&nbsp;Bois">
<meta name="dcterms.date" content="1951-03-01">

<title>Editing The Crisis – Dare You Fight</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../../styles.css">
<meta name="citation_title" content="Editing The Crisis">
<meta name="citation_author" content="W.E.B. Du&nbsp;Bois">
<meta name="citation_publication_date" content="1951-03-01">
<meta name="citation_cover_date" content="1951-03-01">
<meta name="citation_year" content="1951">
<meta name="citation_online_date" content="1951-03-01">
<meta name="citation_fulltext_html_url" content="https://www.dareyoufight.org/Volumes/58/03/editing_the_crisis.html">
<meta name="citation_issue" content="3">
<meta name="citation_volume" content="58">
<meta name="citation_language" content="en">
<meta name="citation_firstpage" content="147">
<meta name="citation_lastpage" content="151, 213">
<meta name="citation_journal_title" content="The&nbsp;Crisis">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../../Images/logo.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../../../index.html">
    <span class="navbar-title">Dare You Fight</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../listing.html"> 
<span class="menu-text">Articles</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../backround.html"> 
<span class="menu-text">Background</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-more" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">More</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-more">    
        <li>
    <a class="dropdown-item" href="../../../map.html">
 <span class="dropdown-text">Article Map</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../covers.html">
 <span class="dropdown-text">Covers</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../credits.html">
 <span class="dropdown-text">Credits</span></a>
  </li>  
    </ul>
  </li>
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Editing The Crisis</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>W.E.B. Du&nbsp;Bois </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">March 1, 1951</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p>From the time I entered High School at Great Barrington, Massachusetts, in 1880, I have had the itch to edit something. The first fruition was a school paper, in manuscript, called the “High School Howler,” edited by me and illustrated by Art Benham, who could draw caricatures. It had as I remember but one issue.</p>
<p>My next effort was while I was a student at Fisk University and I became, first, exchange editor and then editor of the <em>Fisk Herald</em>, during my junior and senior years, 1887-1888.</p>
<p>The next adventure was the monthly called <em>The Moon</em>, which was published by Harry Pace and Edward Simon in Memphis and edited by me in Atlanta in 1906. From 1907 to 1910, I was joint editor of a miniature magazine, published monthly in Washington, D. C. My co-laborers were H. M. Hershaw and F. H. M. Murray.</p>
<p>In 1910, I came to New York as Director of Publications and Research in the NAACP. The idea was that I should continue the kind of research into the Negro problem that I had been carrying on in Atlanta and that eventually I should become Secretary of the NAACP. But I did not want to raise money, and there were no funds for research; so that from the first, I urged that we have a monthly organ.</p>
<p>This seemed necessary because the chief Negro weekly <em>The New York Age</em> was then owned by friends of Mr.&nbsp;Washington, and the Tuskegee organization had tight hold of most of the rest of the Negro press. The result was that the NAACP got a pretty raw deal from the colored press and none at all from the white papers.</p>
<p>In addition to that the Negro press was at the time mainly organs of opinion and not gatherers of news.</p>
<section id="stressed-facts" class="level2">
<h2 class="anchored" data-anchor-id="stressed-facts">Stressed Facts</h2>
<p>I had the idea that a small publication would be read which stressed the facts and minimized editorial opinion, but made it clear and strong; and also published the opinion of others.</p>
<p>There were many on the board of directors who did not agree with me. I remember Albert Pilsbury, former Attorney General of Massachusetts, wrote to me and said: If you have not already determined to publish a magazine, for heavens’ sake drop the idea. The number of publications now is as many as the “plagues of Egypt!” But I was firm, and back of me stood William English Walling, Paul Kennedy, Charles Edward Russell and John E. Mulholland and other members of the board.</p>
</section>
<section id="no-capital" class="level2">
<h2 class="anchored" data-anchor-id="no-capital">No Capital</h2>
<p>But there again the matter of money was difficult. It was hard enough to raise the salaries of our two executive officers, and certainly we had no capital for investment in a periodical. I was persistent and two persons helped me: Mary Maclean, an English woman who was a writer on the <em>New York Times</em> and a loyal and efficient friend; and Robert N. Wood, a printer who was head of the Negro Tammany organization at that time.</p>
<p>Wood knew about printing and I knew nothing. He advised me, helped me to plan the magazine, and took the risk of getting me credit for paper and printing. The Board agreed that it would be responsible for debts up to but not exceeding $50.00 a month. It has always been a matter of pride to me that I never asked for that $50.00.</p>
<p>Finally after what seemed to me interminable delays on various accounts, the first number of <em>The Crisis</em> appeared in November, 1910. It had sixteen 5x8 pages, with a cover which carried one little woodcut of a Negro child; as one of my critics facetiously said: “It is a shame to take the ten cents which this issue costs.”</p>
<p>First because of the news which it contained, in 4 pages of “Along the Color Line”; then because of some blazing editorials which continually got us into hot water with friends and foes; and because of the pictures of Negroes which we carried in increasing number and often in color, <em>The Crisis</em> succeeded.</p>
<p>We condensed more news about Negroes and their problems in a month than most colored papers before this had published in a year. Then we had four pages of editorials, which talked turkey. The articles were at first short and negligible but gradually increased in number, length, and importance; but we were never able to pay contributors. Pictures of colored people were an innovation; and at that time it was the rule of most white papers never to publish a picture of a colored person except as a criminal and the colored papers published mostly pictures of celebrities who sometimes paid for the honor. In general the Negro race was just a little afraid to see itself in plain ink.</p>
</section>
<section id="circulation-growth" class="level2">
<h2 class="anchored" data-anchor-id="circulation-growth">Circulation Growth</h2>
<p>The circulation growth of <em>The Crisis</em> was extraordinary, even to us who believed in it. From a monthly net paid circulation of 9,000 copies in 1911, it jumped to 75,000 copies in 1918, and from an income of $6,500 to an income of $57,000. In January 1916, <em>The Crisis</em> became entirely self-supporting, paying all items of its cost including publicity, light, heat, rent, etc., and the salaries of an editor and business manager and nine clerks. It circulated in every state in the union, in all the insular possessions, and in most foreign countries including Africa.</p>
<p>We doubled the size of the tiny first issue in December, 1910. We increased the number of pictures, trying two-color jobs on the cover in 1911 and three colors in 1912, 1917-1918. Our special education and children’s numbers began in 1914. From time to time we issued special numbers on localities like Chicago and New Orleans; on “Votes for Women” and the pageant “Star of Ethiopia.”</p>
<section id="indispensable-persons" class="level3">
<h3 class="anchored" data-anchor-id="indispensable-persons">Indispensable Persons</h3>
<p>During this period two persons were indispensable in the conduct of <em>The Crisis</em>: Mary Maclean, editorial assistant, who died in harness and worked without pay; and Augustus Dill, business manager, who organized a model office. In November, 1919, Jessie Fauset became literary editor and gave us inestimable help for seven years. Mattie Allison and Lottie Jarvis as secretaries, and Hazel Branch as head of the clerical staff, helped make an ideal family. Frank Turner was our bookkeeper from 1910 until the NAACP took him over in 1922.</p>
<p>We reached a circulation of 100,000 in 1919, following my revelation of the attitude of American army officers toward the Negroes in France. I shall never forget the circumstances of that scoop. I was in the office of Blaise Diagne in the spring of 1919. Diagne was a tall, thin, black Senegalese, French Under-Secretary of State for Colonies, and during the war, French Commissioner in West Africa, out-ranking the Colonial Governor. Diagne saved France by the black shock troops which he brought from Africa and threw against German artillery. They held the Germans until the Allies could get ready for them.</p>
<p>Diagne was consequently a great man and it was his word which induced Prime Minister Clemenceau to let the First Pan-African Congress meet in Paris against the advice of the Americans. Diagne did not like white Americans.</p>
<p>“Did you see,” he stormed, “what the American Mission told the French about the way Negroes should be treated?” Then he showed me the official document. I read it and sat very still. Then I said, as carelessly as possible, “Would it be possible to obtain a copy of this?” “Take that,” said Diagne.</p>
<p>Having the precious document, the problem was what do with it. I dare not carry it nor trust it to the mails. But a white friend who was sailing home offered to take anything I wished to send. I handed him the document sealed, neglecting to say what dynamite was in it. The <em>Crisis</em> office and NAACP officials read it and dropped it until I returned. I published it in May, 1919. The Post Office promptly held the <em>Crisis</em> up in the mails. But it proved too hot for them; if the Government held it that would be acknowledging its authorship. They let it go. We sold 100,000 copies!</p>
</section>
<section id="high-water-mark" class="level3">
<h3 class="anchored" data-anchor-id="high-water-mark">High-Water Mark</h3>
<p>Our income in 1920, was $77,000. That was our high-water mark. Then began a slump which brought the circulation down to 35,000 copies in 1924 and a cash income of $46,000. The causes of this were clear and strike every modern periodical: the reading public is not used to paying for the cost of the periodicals which they read; often they do not pay even for the cost of the paper used in the edition. Advertisers pay for most of the costs and advertisers buy space in periodicals which circulate widely among well-to-do persons able to buy the wares offered. <em>The Crisis</em> was known to circulate among Negro workers of low income. Moreover, it antagonized many white powerful interests; it had been denounced in Congress and many respectable Negroes were afraid to be seen reading it. Mississippi passed laws against it and some of our agents were driven from home.</p>
<p>We got some advertising, especially from Negro businesses; some advertisers we refused because we did not like the wares they offered or suspected fraud. The “Big” advertisers remained aloof; some looked us over, but nearly all fell back on the rule not to patronize “propaganda” periodicals. Beside they did not believe the Negro market worth entering.</p>
<p>Our only recourse was to raise our price of subscription. In December 1919 we raised our price to a dollar and a half for a year and fifteen cents a copy; also we increased our size to 64 pages and cover. This might have extricated us if the prices of everything else had not gone up, while wages went down. The depression which burst on the nation in 1929, started among Negro workers as early as 1926. It struck the workers of the Negro race long before the country in general dreamed of it. I remember bringing the matter to the attention of the president of the board of directors, but he said “the country is unusually prosperous!” Nevertheless, I retorted, the Negro worker is losing old jobs and not getting new ones.</p>
</section>
<section id="opinion-or-propaganda" class="level3">
<h3 class="anchored" data-anchor-id="opinion-or-propaganda">Opinion or Propaganda</h3>
<p>There was a wider underlying cause: How far was <em>The Crisis</em> an organ of opinion and propaganda; and of whose opinion and just what propaganda? Or how far was it an organ of an association catering to its immediate plans and needs? The two objects and methods were not incompatible with each other in the earlier days of beginnings. Indeed from 1910 to 1925 or later <em>The Crisis</em> was the predominant partner, with income and circulation larger than the income and membership of the NAACP. For just this reason the NAACP became known outside its membership, and with the energetic work of Shillady, Johnson, and White, the membership and income increased and the question of the future relation of <em>The Crisis</em> and the NAACP had to be settled. Their complete separation was proposed; or if the income of <em>The Crisis</em> continued to fall, the subsidy of <em>The Crisis</em> by the NAACP; or further attempt to prolong the present relations and increase <em>The Crisis</em> income and circulation.</p>
<p>From 1925 to 1934, the latter method was tried. Various efforts were made to increase <em>The Crisis</em> circulation, by change of form and content. Considerable success ensued, but the depression which now fell heavier on the nation, convinced me that <em>The Crisis</em> could not be made to pay again for a long period and that meantime the only way to keep it alive was by subsidy from the NAACP. For this reason in 1934, I gave up my position as editor and publisher of <em>The Crisis</em> and went back to teaching and writing at Atlanta University.</p>
<p>In the nature of the case, there is a clear distinction between an organ of an organization and a literary magazine. They have different objects and functions. The one is mainly a series of reports and records of organizational technicalities and news notes of methods and routine notices. All large organizations need such a publication. But it is never self-supporting nor widely read. So far as it tries to be literary and artistic, it misses its main function and is too narrow to achieve any other.</p>
</section>
<section id="free-lance-or-nothing" class="level3">
<h3 class="anchored" data-anchor-id="free-lance-or-nothing">Free Lance or Nothing</h3>
<p>On the other hand, a literary and news journal must be free and uncontrolled; in no other way can it be virile, creative, and individual. While it must follow an ideal, and one of which one or more organizations approve, yet its right to deviate in particulars must be granted, else it misses its function of provoking thought, stimulating argument, and attracting readers. For many years the NAACP gave me such freedom and the public repaid them and me by wide support. But when public support lagged and the NAACP must furnish a large part of the supporting funds, it would have called for more faith than any organization was likely to have in one man, to leave me still in untrammeled control. And as for me, I had no interest in a conventional organ; I must be Free Lance or nothing.</p>
<p>Against, therefore, the strong pleas of close friends like Joel Spingarn; and against the openly expressed wish of the whole Board, which did not wholly agree with me, but were willing to yield much to retain me, I resigned. And I resigned completely and not in part. I was not only editor and head of a department which was separate from that of the Executive Secretary, with my own office and staff and separate bank account; I was also one of the incorporators of the NAACP and member of the Board of Directors since its beginning. Its officials from the first had come to consideration and election on my recommendation. I was a member of the Spingarn Medal Committee, and chief speaker at every annual conference. It was fair to say that the policy of the NAACP from 1910 to 1934 was largely of my making.</p>
<p>I would not have been honest therefore with my successors to have resigned in part and hung on to remnants of my former power. I went out completely. I think some sighed in relief. But many were genuinely sorry. Among the latter was myself. For I was leaving my dream and brainchild; my garden of hope and highway to high emprise. But I was 65; my life work was practically done. I looked forward to a few final years of thought, advice and remembrance, beneath the trees and on the hills beside the graves and with the friends where first my real life-work had begun in 1897.</p>
<!-- Similar articles start here -->
<div class="clear-wrap">

</div>
<section id="related-articles" class="level4">
<h4 class="anchored" data-anchor-id="related-articles">Related Articles</h4>
<ul>
<li><a href="../../../Volumes/07/05/booming_crisis.html">Booming The&nbsp;Crisis (1914)</a></li>
<li><a href="../../../Volumes/11/01/we_come_of_age.html">We Come of Age (1915)</a></li>
<li><a href="../../../Volumes/30/01/new_crisis.html">The New Crisis (1925)</a></li>
<li><a href="../../../Volumes/19/06/negro_writers.html">Negro Writers (1920)</a></li>
<li><a href="../../../Volumes/05/01/colored-magazine.html">The Colored Magazine in America (1912)</a></li>
</ul>
<!-- Similar articles end here -->


</section>
</section>
</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-du_bois1951" class="csl-entry quarto-appendix-citeas" role="listitem">
Du&nbsp;Bois, W.E.B. 1951. <span>“Editing The Crisis.”</span>
<em>The&nbsp;Crisis</em> 58 (3): 147–51, 213. <a href="https://www.dareyoufight.org/Volumes/58/03/editing_the_crisis.html">https://www.dareyoufight.org/Volumes/58/03/editing_the_crisis.html</a>.
</div></div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/www\.dareyoufight\.org");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>