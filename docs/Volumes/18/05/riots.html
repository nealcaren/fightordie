<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.45">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Johnson, James Weldon">
<meta name="dcterms.date" content="1919-03-01">

<title>The Riots: An N.A.A.C.P. Investigation – Dare You Fight</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../../styles.css">
<meta name="citation_title" content="The Riots: An N.A.A.C.P. Investigation">
<meta name="citation_author" content="Johnson, James Weldon">
<meta name="citation_publication_date" content="1919-03-01">
<meta name="citation_cover_date" content="1919-03-01">
<meta name="citation_year" content="1919">
<meta name="citation_online_date" content="1919-03-01">
<meta name="citation_issue" content="5">
<meta name="citation_volume" content="18">
<meta name="citation_language" content="en">
<meta name="citation_firstpage" content="241">
<meta name="citation_lastpage" content="244">
<meta name="citation_journal_title" content="The Crisis">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../../index.html">
    <span class="navbar-title">Dare You Fight</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../about.html"> 
<span class="menu-text">Introduction</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../listing.html"> 
<span class="menu-text">Articles</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../covers.html"> 
<span class="menu-text">Covers</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">The Riots: An N.A.A.C.P. Investigation</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Johnson, James Weldon </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">March 1, 1919</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p>I reached Washington early in the evening of July 22. As the train neared the capital I could feel the tenseness of the situation grow. It showed itself in the air of the passengers as they read the newspapers, with their glaring headlines telling of the awful night before and intimating that the worst was yet to come. As I passed through the cars on my way to the diner and back, men and women glanced up at me with what seemed to be a look with a glance which of mild surprise; seemed to say, “This man must indeed have very important business in Washington.”</p>
<p>The porters and waiters plainly showed the strain under which they were doing their work—the strain of suppressed excitement with, perhaps, an added sense of dread of going into something, they knew not what. They moved about quietly, in fact, grimly and entirely without their customary good humor and gaiety. One of the porters who knew who I was questioned the wisdom of my going through with the trip. I may have felt that his question was not absolutely without reason, but I did not admit it. When I left the car he said to me, “Take good care of yourself.” I assured him that I would spare no effort to do so.</p>
<p>I had made many trips to Washington—some as a mere visitor, some as a member of the Government’s Foreign Service, some for the purpose of placing for the National Association matters affecting the race before men high in authority and position; and so I had experienced varied emotions on making the trip to the Nation’s Capital, but none like the emotions experienced on this trip. I knew it to be true, but it was almost an impossibility for me to realize as a truth that men and women of my race were being mobbed, chased, dragged from street cars, beaten and killed within the shadow of the dome of the Capitol, at the very front door of the White House. It was almost an impossibility for me to realize that, perhaps, my own life would not be safe on the public streets.</p>
<p>When we reached the Northwest Section of the city, I found the whole atmosphere entirely different. I had expected to find the colored people excited and, perhaps, panicky; I found them calm and determined, unterrified and unafraid. Although on the night before shots had blazed all through the night at the corners of Seventh and T Streets and Fourteenth and U, I could detect no signs of nervousness on the part of the colored people living in the section. They had reached the determination that they would defend and protect themselves and their homes at the cost of their lives, if necessary, and that determination rendered them calm.</p>
<p>Still, under the outward calm, there was a tautness that could be sensed. Wild rumors had been circulating all day foreboding terrible things; and these things, whatever they might be, the colored people had made up their minds to meet. But as darkness came on, the rain began to fall, and later it fell in torrents; so it may be that the rain had something to do with the things that did not happen.</p>
<p>That evening I met with a half-dozen of the influential colored men of the city. We talked over what had happened and discussed the steps already taken by the authorities and by the colored citizens and such steps as we thought it well to take on the following day.</p>
<p>The next morning Mr.&nbsp;Seligmann and I had a conference with Major Pullman, Chief of Police, regarding the protection of colored citizens. At this interview Mr.&nbsp;Seligmann secured for the information of the National Office and for purposes of publicity data regarding all the alleged cases of attacks on women which had been put forward as the cause of the riots. Our conference with Major Pullman lasted an hour; he expressed a desire to have us talk with Commissioner Brownlow and made an appointment with him for us at two o’clock in the afternoon. Before we left Major Pullman’s office a committee consisting of Dr.&nbsp;A. M. Curtis, young Dr.&nbsp;Curtis and Mr.&nbsp;Emmett J. Scott, accompanied by Captain Doyle of the 8th Police Precinct, came to ask that the Police Department swear in a number of colored men as Special Officers to aid in preserving law and order. Mr.&nbsp;Seligmann and I remained and gave our support to the committee. However, it was plain that Major Pullman was not favorable to the plan. He suggested that the committee take the matter up with his superior, Commissioner Brownlow. Mr.&nbsp;Seligmann and I then informed the committee of our appointment with the Commissioner at two o’clock, and invited them to go.</p>
<p>In the afternoon we had a long conference with Commissioner Brownlow. The whole situation was gone over, and the plan of commissioning colored men as Special Officers was brought up. The Commissioner was stronger in his opposition than the Chief of Police.</p>
<p>In the evening I attended a meeting of the Executive Committee of the Washington Branch to learn what the branch had done and was doing, and to offer such suggestions as I might. I found that the branch had been active as far back as July 9, when it sent a strong letter to all four of the Washington daily papers, calling their attention to the fact that they were sowing the seeds of a race riot by their inflammatory headlines and sensational news articles. After the outbreak of the riots a committee had been appointed which went before Commissioners Brownlow and Gardner and before Major Pullman to urge that effective action be taken to prevent assaults upon defenseless colored people who were the victims of the attacks. Members of the Legal Committee had spent considerable time in court in connection with the trials of the men who had been arrested for carrying weapons for their protection. A committee was set at work obtaining affidavits from victims of the riot who had been wounded or injured. And at this meeting the Legal Committee was authorized to interview all colored persons charged with rioting and offer them legal assistance.</p>
<p>On the following morning I went to the Capitol and talked at length with three influential Senators. I went over the whole situation, not only local, but national, with these Senators, and did my best to show them what I considered to be the principal causes of the trouble. I also spoke to each one of them regarding a Congressional investigation of the whole question of mob violence. I was able to secure from one of these Senators, who has been in Congress for twenty-five years and is a member with experience and prestige, and who is also a strong advocate of justice for the Negro, the promise that he would father a resolution calling for such an investigation and a printed report on the same.</p>
<p>In the afternoon I went to the office of the <em>Washington Post</em> and talked with the city editor. It was the <em>Post</em> which on Monday morning had published the “Mobilization for Tonight” call to the idle service men in Washington to meet near the Knights of Columbus hut on Pennsylvania Avenue, and organize a “clean up.” When I handed the city editor my card, he appeared glad to see me. He seemed to be under the impression that I had come down from New York for the express purpose of telling the colored people in Washington to be “good.” He called a reporter and asked me to tell him what the Association was doing and proposed to do in the matter.</p>
<p>I lost no time in telling him that the organization which I represented stood for law and order; that all the fights it had made in behalf of the colored people had been made through and under the law; but that my reason for calling on him was not to discuss that phase of the situation. I then proceeded to tell him frankly and directly how responsible were the <em>Washington Post</em> and the other Washington dailies for what had taken place.</p>
<p>I talked with him for, perhaps, half an hour. During the whole time he stood as one struck dumb; at least, he answered not a word. I realized that the man was scared through and through. He asked me before I left if I thought the riots were over. I told him I thought they were, unless the whites again took the aggressive. I was surprised to see the next morning that the <em>Post</em> published some of the things I had said.</p>
<p>The next day, accompanied by Mr.&nbsp;R. C. Bruce, I made similar visits to the offices of the <em>Washington Times</em> and the <em>Washington Star</em>. In the afternoon I talked again with one of my Senators. At night I left for New York.</p>
<p>I returned disquieted, but not depressed over the Washington riot; it might have been worse. It might have been a riot in which the Negroes, unprotected by the law, would not have had the spirit to protect themselves.</p>
<p>The Negros saved themselves and saved Washington by their determination not to run, but to fight—fight in defense of their lives and their homes. If the white mob had gone on unchecked—and it was only the determined effort of black men that checked it—Washington would have been another and worse East St.&nbsp;Louis.</p>
<p>As regrettable as are the Washington and the Chicago riots, I feel that they mark the turning point in the psychology of the whole nation regarding the Negro problem. <span class="small-caps">James Weldon Johnson</span>.</p>
<p>Major J. E. SPINGARN reached Chicago, on his way to the West, July 30 and for twenty-four hours did active work for the Association. At his suggestion a committee called on Governor Lowden, on July 30, and among other matters discussed the appointment of a commission of five or eight to study race troubles and to formulate a definite program on race relations for the state,</p>
<p>On July 30 Mr.&nbsp;John R. Shillady, Secretary, and Mr.&nbsp;Herbert J. Seligmann, Director of Publicity, reached Chicago and at once plunged into work relating to the riots. A great amount of publicity in the daily press under the Association’s name is due to Mr.&nbsp;Seligmann’s tireless work. Mr.&nbsp;Shillady sends the following notes:</p>
<blockquote class="blockquote">
There was formed upon my initiative a Joint Emergency Committee to deal with the situation as regards the needs of the colored community, in so far as all elements will work through this committee. This committee is a committee of an executive character, on matters of policy and action, but leaving constituent organizations free to do such part of the work as they may be willing and able to do. The committee consists of one each from the Cook County Bar Association (colored lawyers’ organization), the Urban League, the Y. M. C. A., the N.A.A.C.P. and Ministers-Social Workers Citizens Conference, the last a group which has been meeting daily at Olivet Baptist Church, 31st and South Park Avenue. Further, each representative member is to have an alternative, so that some one will always be available to meet as often as is required.
<p>
</p><p>The lawyers furnish free one of their number to be at each police station and court every morning, to take charge of the legal defense of any colored person needing such service. Headquarters have been arranged for at Olivet Baptist Church, where two lawyers, at least one stenographer, and necessary investigators, paid and volunteer, will be stationed to receive relatives and friends of men in jail and under arrest.</p>
</blockquote>



<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-james_weldon1919" class="csl-entry quarto-appendix-citeas" role="listitem">
James Weldon, Johnson. 1919. <span>“The Riots: An N.A.A.C.P.
Investigation.”</span> <em>The Crisis</em> 18 (5): 241–44.
</div></div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>