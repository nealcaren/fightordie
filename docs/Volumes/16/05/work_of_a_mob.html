<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.45">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="White, Walter F.">
<meta name="dcterms.date" content="1918-03-01">

<title>The Work of a Mob – Dare You Fight</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../../styles.css">
<meta name="citation_title" content="The Work of a Mob">
<meta name="citation_author" content="White, Walter F.">
<meta name="citation_publication_date" content="1918-03-01">
<meta name="citation_cover_date" content="1918-03-01">
<meta name="citation_year" content="1918">
<meta name="citation_online_date" content="1918-03-01">
<meta name="citation_issue" content="5">
<meta name="citation_volume" content="16">
<meta name="citation_language" content="en">
<meta name="citation_firstpage" content="221">
<meta name="citation_lastpage" content="223">
<meta name="citation_journal_title" content="The Crisis">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../../index.html">
    <span class="navbar-title">Dare You Fight</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../about.html"> 
<span class="menu-text">Introduction</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../listing.html"> 
<span class="menu-text">Articles</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../covers.html"> 
<span class="menu-text">Covers</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">The Work of a Mob</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>White, Walter F. </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">March 1, 1918</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p><strong><em>An investigation by Walter F. White, Assistant Secretary, National Association for the Advancement of Colored People, in Brooks and Lowndes Counties, Georgia.</em></strong></p>
<p>The recent strong letter of President Wilson on lynching was undoubtedly called forth by representations from colored people following the lynchings in Brooks and Lowndes Counties, Ga., May 17–24. Hampton Smith, a white farmer, was killed, and newspaper dispatches report six persons as having been lynched for complicity. Investigation shows that at least eleven persons were killed.</p>
<p>Brooks and Lowndes Counties are situated in the southernmost part of the state of Georgia, near the Florida line. They are in the heart of the richest section of the state.</p>
<p>Hampton Smith, whose murder was the immediate cause of the holocaust of lynchings, was the owner of a large plantation in Brooks County. He bore a very poor reputation in the community because of ill treatment of his Negro employees.</p>
<p>Smith’s reputation in this respect had become so wide-spread that he had the greatest difficulty in securing any help whatever. He, therefore, adopted the expedient of going into the courts and whenever a Negro was convicted and was unable to pay his fine or was sentenced to serve a period in the chain-gang, Smith would secure his release and put him to work out his fine on his (Smith’s) plantation. Sidney Johnson, the Negro who admitted before his death that he killed Smith, had been fined thirty dollars for gaming. Smith paid his fine and Johnson was put at work on the former’s plantation until the thirty dollars had been worked out. Johnson had worked out the period and had put in considerable more time and had asked Smith to pay him for the additional time that he had served. Smith refused and a quarrel resulted. A few days later Johnson did not show up for work in the fields and Smith went to Johnson’s cabin to discover the reason. Johnson told Smith that he was sick and unable to work. Smith thereupon began to beat him, in spite of the protestations of the victim. Johnson is said then to have threatened Smith and a few nights later, while sitting in his home, Smith was shot twice through the window near which he was sitting, dying instantly. His wife was also shot, the bullet passing through the center of her breast, miraculously missing both her heart and lungs. Her wound is not believed to be serious. The attending physician, Dr.&nbsp;McMichael, is said to have stated that she would recover.</p>
<p>There seems to be no evidence that Mrs.&nbsp;Smith was raped in addition to being shot.</p>
<p>As soon as news of the murder reached the community, great crowds of men and boys from the two counties hurried to the spot. Excitement ran high and posses were immediately formed to search for Johnson, as suspicion was immediately fastened on him because of the threats he had made against Smith’s life. There was also talk of a conspiracy among a number of Negroes to kill Smith, and reports were circulated that the group involved had met at the home of Hayes Turner, another Negro who had suffered at the hands of Smith, and his wife, Mary Turner, whom Smith had beaten on several occasions. Hayes Turner, it is said, had previously served a term in the chain-gang for threatening Smith, following Smith’s beating of Turner’s wife. Nevertheless, after his release, Turner had gone back to work for Smith again.</p>
<p>The first of the mob’s victims to be captured was Will Head, a Negro of the community, who was caught on Friday morning, May 17, at 8:30, near Barney, Georgia; the second was Will Thompson, seized later on the same day. That night both were lynched near Troupeville, about five miles from Valdosta. Members of the mob stated to the investigator that over seven hundred bullets were fired into the bodies of the two men. The investigator learned from a man who admitted being in the mob, but who stated that he had no part in the lynching, the names of the two leaders of the Friday night mob and of fifteen of the other members of the mob. These names were given to the investigator on his promise that he would not divulge the name of the informant, as to do so would mean that he would undoubtedly be subjected to bodily violence and perhaps death, for having given the information. These names were furnished to Governor Hugh M. Dorsey, of Georgia, on July 10, by the investigator in person.</p>
<p>In addition to those named to the Governor there were many more from Quitman and a large number from Valdosta and the surrounding country whose names were not learned.</p>
<p>On Saturday morning Hayes Turner was captured and lynched near the fork of the Morven and Barney roads. On being captured he was placed in the Quitman jail and for some reason unknown to the investigator was taken later in the day by Sheriff Wade and Roland Knight, the clerk of the county court, ostensibly to be carried to Moultrie for safekeeping. Turner was taken from these men <em>en route</em> to Moultrie, at the fork of the roads about three and a half miles from town. He was lynched with his hands fastened behind him with handcuffs and was allowed to hang there until Monday when he was cut down by county convicts and buried about half a hundred feet from the foot of the tree on which he was lynched. During Sunday following the lynching, hundreds of automobiles, buggies and wagons bore sightseers to the spot while many more tramped there on foot.</p>
<p>Another Negro was lynched on Saturday afternoon near Morven at a spot known as the Old Camp Ground. This person may have been Eugene Rice whose name appeared in the Georgia press among the identified and acknowledged victims, but who was never even remotely connected with Hampton Smith’s killing.</p>
<p>About a week after the tragedy, or tragedies, started, the bodies of three unidentified Negroes were taken from the Little River, below Barney. It is not known whether these bodies were those of some already accounted for or whether these were additional victims of the mob. At the last accounts the bodies themselves had disappeared and could not be located.</p>
<p>The murder of the Negro men was deplorable enough in itself, but the method by which Mrs.&nbsp;Mary Turner was put to death was so revolting and the details are so horrible that it is with reluctance that the account is given. It might be mentioned that each detail given is not the statement of a single person but each phase is related only after careful investigation and corroboration. Mrs.&nbsp;Turner made the remark that the killing of her husband on Saturday was unjust and that if she knew the names of the persons who were in the mob that lynched her husband, she would have warrants sworn out against them and have them punished in the courts.</p>
<p>This news determined the mob to “teach her a lesson” and although she attempted to flee when she heard that they were after her, she was captured at noon on Sunday. The grief-stricken and terrified woman was taken to a lonely and secluded spot, down a narrow road over which the trees touch at their tops, which, with the thick undergrowth on either side of the road; made a gloomy and appropriate spot for the lynching. Near Folsom’s Bridge over the Little River a tree was selected for her execution—a small oak tree extending over the road.</p>
<p>At the time she was lynched, Mary Turner was in her eighth month of pregnancy. The delicate state of her health, one month or less previous to delivery, may be imagined, but this fact had no effect on the tender feelings of the mob. Her ankles were tied together and she was hung to the tree, head downward. Gasoline and oil from the automobiles were thrown on her clothing and while she writhed in agony and the mob howled in glee, a match was applied and her clothes burned from her person. When this had been done and while she was yet alive, a knife, evidently one such as is used in splitting hogs, was taken and the woman’s abdomen was cut open, the unborn babe falling from her womb to the ground. The infant, prematurely born, gave two feeble cries and then its head was crushed by a member of the mob with his heel. Hundreds of bullets were then fired into the body of the woman, now mercifully dead, and the work was over.</p>
<p>Chime Riley, another Negro who was supposed to have left the community, was found by the investigator to have been lynched instead. By the time that he was killed, the mob evidently had begun to become fearful of too many outrages and determined to conceal his body. Although no one seems to have even remotely connected him with the murder of Smith, he was lynched, his hands and feet tied together and turpentine cups, made of clay and used to catch the gum from the pine trees when “chipped,” thus becoming very heavy, were tied to his body and he was thrown into the Little River near Barney. The informant in this case, seen on the spot where Mary Turner was lynched, stated that when the river was low he had gone down to see if the body had come up. Finding no trace of the body, he assumed that it had become lodged in a sand bar. He stated that he found one of the cups, however, which he was keeping as a “souvenir.”</p>
<p>During the outbreak, another Negro by the name of Simon Schuman, who lived on the Moultrie Road near Berlin, was called to the door of his home one night between eight and nine o’clock. He was seized and had not been seen since up to the time (seven weeks later) that the investigator was in the section. The interior of his house was demolished, his family being driven out, and the furniture was hacked to pieces. His family, at the time of the investigator’s visit, was living on the Bryce Plantation, near Berlin. The offense alleged against Schuman is unknown.</p>
<p>Contrary to press reports, Sidney Johnson was not hiding in the swamps near Valdosta, but was in Valdosta from the time of the murder of Smith to the time that he was killed. During this time, he is said to have made the statement to several persons that he alone, was implicated in the killing of Smith and that he alone killed him. There was no suspicion of Johnson’s presence in Valdosta until Johnson went to another Negro, John Henry Bryant by name, and asked for food and aid in making good his escape. Apparently it was Johnson’s intention to wait until the vigilance of the mobs was relaxed and the roads no longer watched and then flee from the country. Bryant gave Johnson the food and then hastened to town to tell where Johnson was. The house was immediately surrounded by a posse headed by Chief of Police Dampier. This was done with caution as Johnson was known to be armed and had sworn that he would never be taken alive. Johnson had only a shot-gun and a revolver, while the posse was armed with high-powered rifles. The firing began and the Chief was wounded in the hand and one of his men in the neck.</p>
<p>After the firing had gone on for a few minutes, Johnson’s firing ceased. A few more bullets were fired into the house for good measure as it was thought that the cessation of firing might be a ruse on Johnson’s part. When it did not resume, still acting cautiously, the house was rushed and Johnson’s body was found, dead. Cheated out of its prey, the crowd took the body, unsexed it with a sharp knife, threw the amputated parts into the street in front of the house, and then tied an end of a rope around Johnson’s neck. The other end was tied to the back of an automobile and the body dragged in open daylight down Patterson Street, one of Valdosta’s business thoroughfares, and out to a place near Barney and near the scene of the crime. There the dead body was fastened to a tree and burned to a crisp.</p>
<p>Very careful attention was given by the investigator to the accounts given at the outbreak of the affair that it was caused by the circulation of pro-German propaganda in the section prior to the outbreak in the hope of stirring up racial disturbances. Absolutely no evidence was found.</p>
<p>Since the lynchings, more than five hundred Negroes have left the immediate vicinity of Valdosta alone and many more have expressed the determination that they too were going to leave as soon as they could dispose of their lands and gather their crops. This wholesale migration occurred in spite of threats made that any Negro who attempted to leave the section would thus show that he was implicated in the murder of Smith and would be dealt with accordingly. Hundreds of acres of untilled land flourishing with weeds and dozens of deserted farm-houses give their own mute testimony of the Negroes’ attitude toward a community in which lynching mobs are allowed to visit vengeance upon members of their race.</p>
<p>All of the facts outlined above, including the names of mob leaders and participants, were given in a memorandum presented by the investigator on July 10 to Governor Hugh M. Dorsey. Governor Dorsey received the information gladly and has promised to take action on the evidence submitted. In a message addressed to the Georgia legislature on July 3, 1918, Governor Dorsey denounced mob violence in strong terms, saying:</p>
<blockquote class="blockquote">
Mob violence should be suppressed, and by State authorities.
<p>
</p><p>If this is not done, it is very probable that Federal intervention will not be long delayed.</p>
</blockquote>



<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-walter_f.1918" class="csl-entry quarto-appendix-citeas" role="listitem">
Walter F., White. 1918. <span>“The Work of a Mob.”</span> <em>The
Crisis</em> 16 (5): 221–23.
</div></div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>